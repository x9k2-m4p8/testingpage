<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript"
      src="https://onsite.optimonk.com/script.js?account=250907"
      async></script>
</head>
<body>
    <p>hello</p>
<script defer>
/* Eredeti szerkezet + 5 másodperc delay */

function triggerAllianzEvent() {
    console.log("A visszaszámlálás indult (5 mp)...");

    // Itt a késleltetés: 5000 ms = 5 másodperc
    setTimeout(function() {
        
        // 1. GTM rész
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({
            'event': 'optimonk-allianz-event'
        });

        // 2. Event létrehozása
        // Fontos: a { bubbles: true } itt is kell, hogy az OptiMonk észrevegye!
        var event = new CustomEvent("optimonk-allianz-event", { 
            bubbles: true, 
            cancelable: true 
        });

        // 3. Esemény elküldése
        document.dispatchEvent(event);
        
        console.log("optimonk allianz event pushed (5 mp késleltetéssel)");

    }, 5000); // <-- Itt állíthatod az időt (ms-ban)
}

// Betöltés kezelése (eredeti logika)
if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", triggerAllianzEvent);
} else {
    triggerAllianzEvent();
}
</script>
</body>
</html>
