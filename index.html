<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript"
      src="https://onsite.optimonk.com/script.js?account=250907"
      async></script>
</head>
<body>
    <p>hello</p>
<script>
(function() {
  // Ez a függvény végzi a kilövést
  function fireAllianzEvent() {
    // 1. DataLayer (marad, mert hasznos)
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      'event': 'optimonk-allianz-event'
    });

    console.log('OptiMonk trigger indítása...');

    // 2. Event létrehozása
    // Beleraktam a { bubbles: true }-t a biztonság kedvéért, 
    // de a lényeg a lenti sor (dispatchEvent).
    const event = new CustomEvent("optimonk-allianz-event", { bubbles: true });

    // 3. A KULCS: Ugyanoda lőjük, ahova a quickScroll kódod is tette
    // A document.documentElement a <HTML> elemet jelenti.
    document.documentElement.dispatchEvent(event);
    
    console.log('OptiMonk trigger fired: optimonk-allianz-event (on documentElement)');
  }

  // 4. Időzítés: Azonnal fusson, ha kész az oldal (nem scrollra, mint a másik, hanem betöltésre)
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", fireAllianzEvent);
  } else {
    fireAllianzEvent();
  }
})();
</script>
</body>
</html>
